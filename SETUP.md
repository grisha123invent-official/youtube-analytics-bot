# Подробная инструкция по установке и настройке

Эта инструкция поможет вам настроить и запустить Бот-аналитик для YouTube каналов.

## Технические требования

- Python 3.8 или выше
- Доступ к интернету
- API-ключи для необходимых сервисов

## Шаг 1: Получение API-ключей

### Telegram Bot Token
1. Откройте Telegram и найдите @BotFather
2. Отправьте команду `/newbot`
3. Следуйте инструкциям для создания нового бота
4. После создания бота вы получите API-токен, который нужно сохранить

### YouTube API Key
1. Перейдите на [Google Cloud Console](https://console.cloud.google.com/)
2. Создайте новый проект
3. В меню выберите "APIs & Services" > "Library"
4. Найдите и активируйте "YouTube Data API v3"
5. Создайте учетные данные API (API Key)
6. Скопируйте полученный ключ API

### OpenAI API Key
1. Зарегистрируйтесь на [OpenAI Platform](https://platform.openai.com/)
2. Перейдите в раздел "API keys" в личном кабинете
3. Создайте новый ключ API
4. Скопируйте полученный ключ
5. **Важно**: Убедитесь, что у вас есть доступ к моделям GPT-4o и o1-mini в вашей подписке

### Perplexity API Key (для анализа трендов)
1. Зарегистрируйтесь на [Perplexity AI](https://www.perplexity.ai/)
2. Перейдите в настройки аккаунта
3. Найдите раздел API и создайте новый ключ
4. Скопируйте полученный ключ
5. **Важно**: Требуется подписка, которая включает доступ к модели sonar-pro

## Шаг 2: Установка бота

### Клонирование репозитория
```bash
git clone https://github.com/username/youtube-analytics-bot.git
cd youtube-analytics-bot
```

### Настройка виртуального окружения
```bash
# Создание виртуального окружения
python -m venv .venv

# Активация виртуального окружения в Windows
.venv\Scripts\activate

# Активация виртуального окружения в Linux/Mac
source .venv/bin/activate
```

### Установка зависимостей
```bash
pip install -r requirements.txt
```

## Шаг 3: Настройка переменных окружения

1. Скопируйте файл `.env.example` и переименуйте копию в `.env`:
```bash
cp .env.example .env
```

2. Откройте файл `.env` в текстовом редакторе и замените значения на полученные API-ключи:
```
TELEGRAM_BOT_TOKEN=your_telegram_bot_token
YOUTUBE_API_KEY=your_youtube_api_key
OPENAI_API_KEY=your_openai_api_key
PERPLEXITY_API_KEY=your_perplexity_api_key
```

## Шаг 4: Запуск бота

```bash
python main.py
```

После запуска вы увидите сообщение "Бот запущен. Нажмите Ctrl+C для остановки."

## Шаг 5: Использование бота

1. Откройте Telegram и найдите своего бота по имени, которое вы указали при создании
2. Отправьте команду `/start` для начала работы
3. Отправьте ссылку на YouTube-канал для анализа
4. После завершения анализа используйте кнопки внизу сообщения для:
   - Генерации идей для обычных видео
   - Генерации идей для Shorts
   - Ввода и оценки собственных идей
   - Анализа трендов в выбранной нише

## Особенности работы с AI моделями

### GPT-4o и o1-mini
Бот использует две модели от OpenAI:
- **GPT-4o** - для глубокого анализа канала и генерации рекомендаций
- **o1-mini** - для быстрой генерации идей контента и оценки идей

Вы можете изменить используемые модели, отредактировав соответствующие параметры в файле main.py.

### Perplexity API (sonar-pro)
Для анализа трендов бот использует модель sonar-pro от Perplexity, которая обладает возможностью поиска в интернете и предоставления актуальной информации о трендах в нише YouTube.

## Устранение неполадок

### Ошибка авторизации API
Проверьте правильность указанных API-ключей в файле `.env`.

### Ошибка при запуске
Убедитесь, что установлены все зависимости из файла `requirements.txt`.

### Ошибки в работе с моделями
- Для OpenAI: убедитесь, что у вас есть доступ к запрашиваемым моделям (GPT-4o, o1-mini)
- Для Perplexity: убедитесь, что у вас активирован доступ к модели sonar-pro

### Превышены лимиты API
YouTube API и OpenAI API имеют ограничения на количество запросов:
- YouTube API: 10,000 units per day (разные операции потребляют разное количество единиц)
- OpenAI API: зависит от вашего тарифного плана и баланса
- Perplexity API: зависит от вашего тарифного плана

## Дополнительные настройки

### Настройка сервера для постоянной работы
Для запуска бота на сервере в фоновом режиме можно использовать `nohup`:
```bash
nohup python main.py &
```

Или использовать систему управления процессами, например `systemd`, `pm2` или `supervisor`. 